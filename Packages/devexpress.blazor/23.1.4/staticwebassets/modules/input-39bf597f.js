import{_ as e}from"./_tslib-6e8ca86b.js";import{D as t,b as s,c as n,d as o,I as i,T as r}from"./text-editor-f74d98c0.js";import{t as d}from"./constants-2d0e11b4.js";import{s as u}from"./lit-element-70cf14f4.js";import{e as l}from"./property-d3853089.js";import{e as a}from"./custom-element-267f9a21.js";import"./single-slot-element-base-d44a6577.js";import"./data-qa-utils-8be7c726.js";import"./dx-ui-element-7f5e2dd2.js";import"./logicaltreehelper-bc8e12d3.js";import"./layouthelper-dc0e1370.js";import"./rect-00eb3fa4.js";import"./point-e4ec110e.js";import"./constants-58283e53.js";import"./lit-element-base-7a85dca5.js";import"./css-classes-f3f8ed66.js";import"./custom-events-helper-18f7786a.js";import"./eventhelper-8570b930.js";var p;!function(e){e.isDisplayFormatDefined="is-display-format-defined",e.isPassword="is-password"}(p||(p={}));const c={...p,...t};let h=class extends s{constructor(){super(...arguments),this.selectionObserver=new MutationObserver(this.selectInputValue.bind(this)),this.boundOnInputFocusHandler=this.onInputFocusIn.bind(this),this.boundOnInputFocusOutHandler=this.onInputFocusOut.bind(this),this.boundOnInputPointerDownHandler=this.onPointerDown.bind(this),this.boundOnBeforeInputHandler=this.onBeforeInput.bind(this),this.boundOnInputKeyUpHandler=this.onInputKeyUp.bind(this),this.isDisplayFormatDefined=!1,this.isPassword=!1}get shouldProcessFocusIn(){return this.isDisplayFormatDefined}get shouldProcessFocusOut(){return this.isDisplayFormatDefined}get shouldProcessEnter(){return!1}get inputElement(){return this.fieldElement}get shouldProcessFieldTextVersion(){return!this.isPassword&&super.shouldProcessFieldTextVersion}onFieldReady(e,t){e.addEventListener("keyup",this.boundOnInputKeyUpHandler),e.addEventListener("beforeinput",this.boundOnBeforeInputHandler),e.addEventListener("focus",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),e.addEventListener("pointerdown",this.boundOnInputPointerDownHandler),super.onFieldReady(e,t),t&&this.focused&&this.onInputFocusIn()}onTemplateWithoutInputReady(e){super.onTemplateWithoutInputReady(e),e.addEventListener("focus",this.boundOnInputFocusHandler),e.addEventListener("focusout",this.boundOnInputFocusOutHandler),e.addEventListener("keyup",this.boundOnInputKeyUpHandler)}onInputFocusIn(){this.shouldProcessFocusIn&&this.processFocusIn()}onInputFocusOut(e){this.shouldProcessFocusOut&&this.processFocusOut(e)}onInputKeyUp(e){this.isReadOnly||this.processKeyUp(e)}onBeforeInput(e){this.processBeforeInput(e)}onPointerDown(e){super.onPointerDown(e),this.processPointerDown(e)}processKeyUp(e){return!1}processFocusIn(){if(!this.fieldElement)return;const e=0===this.fieldElement.selectionStart&&this.fieldElement.selectionEnd===this.fieldElementValue.length&&this.focused;this.selectionObserver.observe(this.fieldElement,{attributeFilter:["data-need-selection"]}),this.raiseFocusIn(e)}processFocusOut(e){this.raiseFocusOut(this.fieldElementValue)}processBeforeInput(e){return!1}processPointerDown(e){return!1}selectInputValue(){this.fieldElement&&this.focused&&(this.fieldElement.select(),this.fieldElement.removeAttribute("data-need-selection"),this.selectionObserver.disconnect())}raiseFocusIn(e){this.dispatchEvent(new n(e))}raiseFocusOut(e,t){this.dispatchEvent(new o(e,t))}raiseKeyDown(e){this.dispatchEvent(new i(e))}getFieldElement(){return this.querySelector(`.${r.TextEditInput}`)}selectInputText(e,t){this.fieldElement&&this.fieldElement.setSelectionRange(e,t)}selectAll(){this.fieldElement&&this.focused&&this.fieldElement.select()}onPasswordChanged(){this.isPassword&&(this.fieldElementValue="")}updated(e){this.rendered&&e.has("isPassword")&&this.onPasswordChanged(),super.updated(e)}};h.shadowRootOptions={...u.shadowRootOptions,delegatesFocus:!0},e([l({type:Boolean,attribute:p.isDisplayFormatDefined})],h.prototype,"isDisplayFormatDefined",void 0),e([l({type:Boolean,attribute:p.isPassword})],h.prototype,"isPassword",void 0),h=e([a(d)],h);const m={loadModule:function(){}};export{h as DxInputEditor,c as DxInputEditorAttributes,m as default};
