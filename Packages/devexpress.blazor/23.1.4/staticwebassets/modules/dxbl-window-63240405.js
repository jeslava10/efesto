import{_ as t}from"./_tslib-6e8ca86b.js";import{r as e,D as i,a as o}from"./dropdowncomponents-f131d941.js";import{D as n}from"./popupportal-fcf1c46a.js";import{P as r}from"./point-e4ec110e.js";import{P as s,C as l,B as a,a as p,b as h,D as c,c as u,d,Z as m}from"./popup-9012b161.js";import{p as f,a as g}from"./utils-4a03fb47.js";import{y as w}from"./lit-element-70cf14f4.js";import{e as b}from"./property-d3853089.js";import{e as y}from"./custom-element-267f9a21.js";import"./thumb-1c09cc55.js";import"./data-qa-utils-8be7c726.js";import"./eventhelper-8570b930.js";import"./rect-00eb3fa4.js";import"./layouthelper-dc0e1370.js";import"./constants-58283e53.js";import"./custom-events-helper-18f7786a.js";import"./events-interseptor-8aee1ab4.js";import"./branch-bf06b0d2.js";import"./logicaltreehelper-bc8e12d3.js";import"./rafaction-bba7928b.js";import"./transformhelper-ebad0156.js";import"./positiontracker-1fe0834d.js";import"./capturemanager-86a8762a.js";import"./pointer-event-helper-ba4ce1e1.js";import"./dx-ui-element-7f5e2dd2.js";import"./lit-element-base-7a85dca5.js";import"./nameof-factory-64d95f5b.js";import"./dx-html-element-pointer-events-helper-4b46ddbf.js";import"./dom-f93f7533.js";function x(){return new Promise(((t,e)=>{requestAnimationFrame((()=>{setTimeout(t)}))}))}var j,z,A;!function(t){t.Center="Center",t.Left="Left",t.Right="Right"}(z||(z={})),function(t){t.Top="Top",t.Center="Center",t.Bottom="Bottom"}(A||(A={}));let C=class extends n{constructor(){super(...arguments),this.allowResize=!1}render(){return this.allowResize?w`<dxbl-popup-resizable-container><slot></slot></dxbl-popup-resizable-container>`:w`<slot></slot>`}};t([b({type:Boolean,attribute:"allow-resize",reflect:!1})],C.prototype,"allowResize",void 0),C=t([y("dxbl-window-dialog")],C);let S=class extends i{constructor(){super()}};S=t([y("dxbl-window-root")],S);let T=j=class extends o{constructor(){super(),this.actualSize=null,this.actualPosition=null,this.initialSize=null,this.initialPosition=null,this.actualMinWidth=null,this.actualMaxWidth=null,this.actualMinHeight=null,this.actualMaxHeight=null,this.sizeDirty=!1,this.positionYDirty=!1,this.positionXDirty=!1,this.showAnchorElement=null,this._showOptionsToApply=null,this.isAdjustDialogEnabled=!0,this.horizontalAlignment=z.Center,this.verticalAlignment=A.Center,this.closeOnEscape=!1,this.zIndex=0,this.placement=s.Custom,this.closeMode=l.None,g(this)}get branchType(){return a.Window}get canAdjustZIndexOnShow(){return!1}get positionY(){return this.offset.y}set positionY(t){this.positionYDirty=!0,this.offset=new r(this.positionX||0,t||0)}get positionX(){return this.offset.x}set positionX(t){this.positionXDirty=!0,this.offset=new r(t||0,this.positionY||0)}get showOptionsToApply(){return this._showOptionsToApply}set showOptionsToApply(t){this._showOptionsToApply=t,this.positionXDirty=!1,this.positionYDirty=!1}move(t){return this.showOptionsToApply=t,this.forceReposition(),x()}showAt(t){return this.showOptionsToApply=t,super.show(),x()}show(){this.showAt(this.showOptionsToApply).catch((t=>{}))}static getPlacementTargetClientRect(t){if(null!==t){if(null!==t.targetReference&&t.targetReference instanceof HTMLElement)return t.targetReference.getBoundingClientRect();if(null!==t.targetSelector){const e=document.querySelector(t.targetSelector);if(null!==e)return e.getBoundingClientRect()}}return{x:0,y:0,width:window.innerWidth,height:window.innerHeight}}static getShowAtBox(t){return null===t?null:null!==t.targetReference&&t.targetReference instanceof HTMLElement?j.getElementTopLeftPoint(t.targetReference):null!==t.targetSelector?j.getElementTopLeftPoint(document.querySelector(t.targetSelector)):t.targetPoint}static getElementTopLeftPoint(t){if(null===t)return null;const e=t.getBoundingClientRect();return new r(e.left,e.top)}canProcessEscapeKeyDown(){return this.closeOnEscape}renderTemplate(){return w`
            <dxbl-branch
                id="branch"
                branch-id="${this.branchId}"
                parent-branch-id="${this.parentBranchId}"
                type="${this.branchType}"
                style="${this.dragCssStyle}">
                <dxbl-window-root
                    id="root"
                    style="${this.rootCssStyle}"
                    ?resizing="${this.resizing}"
                    drop-opposite="${this.actualDropOpposite}"
                    drop-direction="${this.actualDropDirection}"
                    drop-alignment="${this.actualDropAlignment}">
                    ${this.renderDefaultSlot()}
                    ${this.renderAdditionalSlots()}
                    ${this.renderBridgeSlot()}
                </dxbl-window-root>
            </dxbl-branch>
        `}raiseResizeCompleted(t,e){this.sizeDirty=!0,super.raiseResizeCompleted(t,e)}processCustomPlacement(t,e){if(this.positionXDirty||this.positionYDirty||this.isInDragOperation||this.sizeDirty)return null;const i=this.showOptionsToApply;if(i){const t=i.targetPoint||this.calcShowPoint(i);return[new p(t,h.None,!1,c.Near,u.bottom)]}return null}calcShowPoint(t){const e=j.getPlacementTargetClientRect(t),i=this.getBoundingClientRect(),o=document.body.getBoundingClientRect(),n=this.calcShowXPoint(i,e),s=this.calcShowYPoint(i,e),l=o.y+o.height-i.height;return new r(Math.max(0,n+window.scrollX-Math.max(0,n-(o.x+o.width-i.width))),Math.max(0,s+window.scrollY-Math.max(0,s-l)))}calcShowXPoint(t,e){return Math.floor((()=>{switch(this.horizontalAlignment){case z.Left:return e.x;case z.Right:return e.x+e.width-t.width;case z.Center:return e.x+e.width/2-t.width/2}throw new Error("calcShowXPoint not supported for horizontalAlignment:"+this.horizontalAlignment)})())}calcShowYPoint(t,e){return Math.floor((()=>{switch(this.verticalAlignment){case A.Top:return e.y;case A.Bottom:return e.y+e.height-t.height;case A.Center:return e.y+e.height/2-t.height/2}throw new Error("calcShowYPoint not supported for horizontalAlignment:"+this.verticalAlignment)})())}updated(t){super.update(t),t.has("zIndex")&&this.zIndex&&this.raiseZIndexChange()}raiseZIndexChange(){this.updateComplete.then((t=>{this.dispatchEvent(new d(new m(this.zIndex)))}))}};function D(t){if(!t)throw new Error("failed");return t}t([b({type:z,attribute:"horizontal-alignment",reflect:!1})],T.prototype,"horizontalAlignment",void 0),t([b({type:z,attribute:"vertical-alignment",reflect:!1})],T.prototype,"verticalAlignment",void 0),t([b({type:Number,attribute:"position-y",reflect:!1})],T.prototype,"positionY",null),t([b({type:Number,attribute:"position-x",reflect:!1})],T.prototype,"positionX",null),t([b({type:Boolean,attribute:"close-on-escape"})],T.prototype,"closeOnEscape",void 0),t([b({type:Number,attribute:"z-index"})],T.prototype,"zIndex",void 0),T=j=t([y("dxbl-window")],T);export{T as DxWindow,D as getWindowRef};
